============ SERVERS =============
*********Server*********
Port: 8080
ServerName: 
MaxByte: 1048576
Root: /home/taung/webserv/www
Index: index.html
Error page: [404] = /home/taung/webserv/www/errors/404.html
Error page: [413] = /home/taung/webserv/www/errors/413.html
Location: [/](not CGI block)
	root: 
	index: 
	limit except: GET 
	autoIndex: off
	cgiPass: 
	cgiExt: 
	uploadStore: 
	proxyPass: 
Location: [/autoindex/](not CGI block)
	root: 
	index: 
	limit except: GET 
	autoIndex: on
	cgiPass: 
	cgiExt: 
	uploadStore: 
	proxyPass: 
Location: [/cgi-bin/](CGI block)
	root: 
	index: 
	limit except: GET 
	autoIndex: off
	cgiPass: /usr/bin/python3
	cgiExt: .py
	uploadStore: 
	proxyPass: 
Location: [/redirect/](not CGI block)
	root: 
	index: 
	limit except: GET 
	return: [301] = /files/
	autoIndex: off
	cgiPass: 
	cgiExt: 
	uploadStore: 
	proxyPass: 
Location: [/static/](not CGI block)
	root: /home/taung/webserv/www/static
	index: about.html 
	limit except: GET 
	autoIndex: off
	cgiPass: 
	cgiExt: 
	uploadStore: 
	proxyPass: 
Location: [/upload/](not CGI block)
	root: 
	index: 
	limit except: GET POST DELETE 
	autoIndex: off
	cgiPass: 
	cgiExt: 
	uploadStore: /home/taung/webserv/www/upload
	proxyPass: 
************************

============ SERVERS END =============
socket open OK
socket bind OK
socket listen OK
socket: 3

Listening on port: http://localhost:8080
0 times looping
epoll loop: 0
3
Client fd, server constructor called
1 times looping
epoll loop: 0
handle read called
client has state0
reading from client
Received 438 bytes
header not found, finding
Request complete (headers + body)
updating client
=====================================
Raw Request:
GET / HTTP/1.1
Host: localhost:8080
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:142.0) Gecko/20100101 Firefox/142.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate, br, zstd
Connection: keep-alive
Upgrade-Insecure-Requests: 1
Sec-Fetch-Dest: document
Sec-Fetch-Mode: navigate
Sec-Fetch-Site: none
Sec-Fetch-User: ?1
Priority: u=0, i


=====================================
Request line: GET / HTTP/1.1
Final path: /home/taung/webserv/www/
updating done
client state: 6
2 times looping
epoll loop: 0
EPOLLOUT
handle write called
Client FD: 5
Resquest: 0x23726790
Response: 0
State: 6

RES RDY
Method: GET
URL Path: /
Final Path: /home/taung/webserv/www/
HTTP Version: HTTP/1.1
Headers: 
	[Accept]: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
	[Accept-Encoding]: gzip, deflate, br, zstd
	[Accept-Language]: en-US,en;q=0.5
	[Connection]: keep-alive
	[Host]: localhost:8080
	[Priority]: u=0, i
	[Sec-Fetch-Dest]: document
	[Sec-Fetch-Mode]: navigate
	[Sec-Fetch-Site]: none
	[Sec-Fetch-User]: ?1
	[Upgrade-Insecure-Requests]: 1
	[User-Agent]: Mozilla/5.0 (X11; Linux x86_64; rv:142.0) Gecko/20100101 Firefox/142.0

1048576
Allowed: 1048576 Have: 0
Requested Path: /home/taung/webserv/www/index.html
========================
Http version: HTTP/1.1
Error Code: 200
Error Msg: OK
Headers:
  [Connection] = close
  [Content-Length] = 384
  [Content-Type] = text/html
----------------HEADER END-----------------
Body: <!DOCTYPE html>
<html>
<head><title>Webserv Demo</title></head>
<body>
<h1>Welcome to Webserv</h1>
<ul>
  <li><a href="/static/about.html">Static file</a></li>
  <li><a href="/autoindex/">Autoindex directory</a></li>
  <li><a href="/redirect">Redirection</a></li>
  <li><a href="/upload">File Upload</a></li>
  <li><a href="/cgi-bin/hello.py">CGI Hello</a></li>
</ul>
</body>
</html>


========================
handle write done
3 times looping
epoll loop: 0
EPOLLOUT
handle write called
Client FD: 5
Resquest: 0x23726790
Response: 0x2372a900
State: 7

Sent 468 bytes to clienthttpResponse size: 468
Remaining outBuffer size: 0
Client Destructor called for fd: 5
==============================================
Client map size after removal: 0
==============================================
Client 5 closed and removed from epoll
handle write done
4 times looping
epoll loop: 0
3
Client fd, server constructor called
5 times looping
epoll loop: 0
handle read called
client has state0
reading from client
Client closed connection
Client Destructor called for fd: 5
==============================================
Client map size after removal: 0
==============================================
Client 5 closed and removed from epoll
client state: 0
6 times looping
epoll loop: 0
3
Client fd, server constructor called
7 times looping
epoll loop: 0
handle read called
client has state0
reading from client
Received 494 bytes
header not found, finding
Request complete (headers + body)
updating client
=====================================
Raw Request:
GET /cgi-bin/hello.py HTTP/1.1
Host: localhost:8080
User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:142.0) Gecko/20100101 Firefox/142.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate, br, zstd
Connection: keep-alive
Referer: http://localhost:8080/
Upgrade-Insecure-Requests: 1
Sec-Fetch-Dest: document
Sec-Fetch-Mode: navigate
Sec-Fetch-Site: same-origin
Sec-Fetch-User: ?1
Priority: u=0, i


=====================================
Request line: GET /cgi-bin/hello.py HTTP/1.1
Final path: /home/taung/webserv/www/cgi-bin/hello.py
Starting CGI execution
CGI process started with PID: 94512
client state: 2
8 times looping
epoll loop: 0
Reading from CGI fd: 8
9 times looping
epoll loop: 0
CGI response complete, finalizing
1048576
Allowed: 1048576 Have: 0
CGI body sent 
10 times looping
epoll loop: 0
EPOLLOUT
handle write called
Client FD: 5
Resquest: 0x23726790
Response: 0x2372a900
State: 6

RES RDY
Method: GET
URL Path: /cgi-bin/hello.py
Final Path: /home/taung/webserv/www/cgi-bin/hello.py
HTTP Version: HTTP/1.1
Headers: 
	[Accept]: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
	[Accept-Encoding]: gzip, deflate, br, zstd
	[Accept-Language]: en-US,en;q=0.5
	[Connection]: keep-alive
	[Host]: localhost:8080
	[Priority]: u=0, i
	[Referer]: http://localhost:8080/
	[Sec-Fetch-Dest]: document
	[Sec-Fetch-Mode]: navigate
	[Sec-Fetch-Site]: same-origin
	[Sec-Fetch-User]: ?1
	[Upgrade-Insecure-Requests]: 1
	[User-Agent]: Mozilla/5.0 (X11; Linux x86_64; rv:142.0) Gecko/20100101 Firefox/142.0

1048576
Allowed: 1048576 Have: 0
CGI body sent 
========================
Http version: HTTP/1.1
Error Code: 200
Error Msg: OK
Headers:
  [Connection] = close
  [Content-Length] = 49
  [Content-Type] = text/html
----------------HEADER END-----------------
Body: Content-Type: text/html

<h1>Hello from CGI</h1>


========================
handle write done
11 times looping
epoll loop: 0
EPOLLOUT
handle write called
Client FD: 5
Resquest: 0x23726790
Response: 0x2372d2c0
State: 7

Sent 132 bytes to clienthttpResponse size: 132
Remaining outBuffer size: 0
Client Destructor called for fd: 5
==============================================
Client map size after removal: 0
==============================================
Client 5 closed and removed from epoll
handle write done
12 times looping
epoll loop: 0
3
Client fd, server constructor called
13 times looping
epoll loop: 0
handle read called
client has state0
reading from client
Client closed connection
Client Destructor called for fd: 5
==============================================
Client map size after removal: 0
==============================================
Client 5 closed and removed from epoll
client state: 0
14 times looping

Received SIGINT - shutting down gracefully...
socket closed OK
